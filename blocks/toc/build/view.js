document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".entry-content");if(e){const t=e.querySelectorAll("h2:not(.toc-exclude), h3:not(.toc-exclude)"),c=document.querySelectorAll(".wp-block-humi-toc");t.length>1&&c.forEach((e=>{const c=document.createElement("h2");c.classList.add("wp-block-humi-toc-title"),c.innerText="目次",e.appendChild(c);const n=document.createElement("ol");n.classList.add("wp-block-humi-toc-list"),e.appendChild(n);let o=0,l=1;t.forEach((e=>{let t;e.id?t=e.id:("H2"===e.tagName?(o++,t="su-toc-item-"+o):(t=`su-toc-item-${o}-${l}`,l++),e.id=t);const c=document.createElement("li");c.classList.add("wp-block-humi-toc-item");const d=document.createElement("a"),i=document.createElement("span");i.classList.add("toc-label"),i.innerText=e.innerText,d.appendChild(i),c.appendChild(d);const a=document.createElement("span");a.classList.add("wp-block-humi-toc-number"),"H2"===e.tagName?(d.classList.add("wp-block-humi-toc-a","wp-block-humi-toc-h2"),d.href="#"+t,a.innerText=o+"."):(d.classList.add("wp-block-humi-toc-a","wp-block-humi-toc-h3"),d.href="#"+t,a.innerText=`${o}-${l}.`),d.insertBefore(a,d.firstChild),n.appendChild(c)}))}))}}));